From 8066b69b14735e94432316055d8546572ae65c9e Mon Sep 17 00:00:00 2001
From: Sven Gothel <sgothel@jausoft.com>
Date: Thu, 28 Dec 2017 04:28:26 +0100
Subject: [PATCH] Using AV_CODEC_ID_SUBRIP instead of AV_CODEC_ID_SRT
 (libav->ffmpeg)

This fixes issue https://trac.ffmpeg.org/ticket/6304
See https://github.com/HandBrake/HandBrake/pull/981#issuecomment-347364763
See https://github.com/HandBrake/HandBrake/issues/974#issuecomment-353986772
---
 libhb/stream.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/libhb/stream.c b/libhb/stream.c
index e223482cd..34670160b 100644
--- a/libhb/stream.c
+++ b/libhb/stream.c
@@ -5309,7 +5309,7 @@ static void add_ffmpeg_subtitle( hb_title_t *title, hb_stream_t *stream, int id
                         "subtitle colors likely to be wrong" );
             break;
         case AV_CODEC_ID_TEXT:
-        case AV_CODEC_ID_SRT:
+        case AV_CODEC_ID_SUBRIP:
             subtitle->format = TEXTSUB;
             subtitle->source = UTF8SUB;
             subtitle->config.dest = PASSTHRUSUB;
@@ -5882,7 +5882,7 @@ hb_buffer_t * hb_ffmpeg_read( hb_stream_t *stream )
             break;
     }
     if ( ffmpeg_pkt_codec == AV_CODEC_ID_TEXT ||
-         ffmpeg_pkt_codec == AV_CODEC_ID_SRT  ||
+         ffmpeg_pkt_codec == AV_CODEC_ID_SUBRIP  ||
          ffmpeg_pkt_codec == AV_CODEC_ID_MOV_TEXT ) {
         int64_t ffmpeg_pkt_duration = stream->ffmpeg_pkt.duration;
         int64_t buf_duration = av_to_hb_pts( ffmpeg_pkt_duration, tsconv, 0 );

